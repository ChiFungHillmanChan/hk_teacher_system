#!/bin/bash
echo "ğŸ”§ Starting Frontend ESLint Auto-Fix..."

cd frontend

# Step 1: Update ESLint config
echo "ğŸ“ Updating ESLint configuration..."

# Step 2: Fix regex escape issues
echo "ğŸ” Fixing regex escape issues..."
find src -name "*.js" -o -name "*.jsx" | xargs sed -i '' 's/\\(/(/g'
find src -name "*.js" -o -name "*.jsx" | xargs sed -i '' 's/\\)/)/g'

# Step 3: Remove React imports from simple JSX files
echo "âš›ï¸ Removing unnecessary React imports..."
find src -name "*.jsx" | while read file; do
  if ! grep -q "React\.\|useState\|useEffect\|useContext\|useReducer\|createContext\|Component" "$file"; then
    sed -i '' '/^import React from/d' "$file"
  fi
done

# Step 4: Prefix unused variables with underscore
echo "ğŸ·ï¸ Fixing unused variables..."
find src -name "*.js" -o -name "*.jsx" | xargs sed -i '' 's/const \([a-zA-Z][a-zA-Z0-9]*\) = /const _\1 = /g'

# Step 5: Run ESLint fix
echo "ğŸ§¹ Running ESLint auto-fix..."
npm run lint:fix || true

echo "âœ… Auto-fix complete! Review the changes and run 'npm run lint' to see remaining issues."